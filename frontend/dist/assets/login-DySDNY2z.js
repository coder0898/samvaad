import{b as g}from"./util-DwtvpL__.js";const c=" https://samvaad-r7bw.onrender.com";function d(){const s=document.getElementById("loginForm");if(!s)return;const i=document.getElementById("loginUserName"),a=document.getElementById("loginUserPassword"),o=document.getElementById("loginError");async function l(t,n){try{console.log("Logging in with:",t,n);const e=await fetch(`${c}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})}),r=await e.json();if(!e.ok){o.innerText=r.message||"Login failed";return}localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user)),window.location.href="chat.html"}catch(e){o.innerText="Login error: "+e.message,console.error(e)}}s.addEventListener("submit",t=>{t.preventDefault();const n=i.value.trim(),e=a.value.trim();if(g(n,e)){o.innerText="Please enter both username and password";return}l(n,e)})}export{d as initLogin};
