import{b as l}from"./util-DwtvpL__.js";const c="https://samvaad-r7bw.onrender.com";function m(){const s=document.getElementById("loginForm");if(!s)return;const i=document.getElementById("loginUserName"),a=document.getElementById("loginUserPassword"),n=document.getElementById("loginError");async function g(t,o){try{console.log("Logging in with:",t,o);const e=await fetch(`${c}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:o})}),r=await e.json();if(!e.ok){n&&(n.innerText=r.message||"Login failed");return}localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user)),typeof window.showChatPage=="function"?window.showChatPage():console.warn("showChatPage() not found!")}catch(e){n&&(n.innerText="Login error: "+e.message),console.error(e)}}s.addEventListener("submit",t=>{t.preventDefault();const o=i.value.trim(),e=a.value.trim();if(l(o,e)){n&&(n.innerText="Please enter both username and password");return}g(o,e)})}export{m as initLogin};
